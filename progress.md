# 개발 진행 계획: "가이드 훈련 세션" 도입 (v3)

**최종 목표:** 사용자가 AI 추천 훈련을 수행할 때, **각 단계별 타이머**를 통해 몰입감과 리듬감을 극대화하고, 좌절감 없는 목표 지향적 경험을 제공한다.

**핵심 철학:** 전체 훈련 시간은 가이드라인으로 유지하되, 훈련의 각 단계를 명확한 시간 제한이 있는 미니 게임처럼 구성한다. 이를 통해 사용자의 집중력을 높이고, 훈련을 더욱 재미있고 효과적으로 만든다.

---

### **1단계: AI 프롬프트 및 데이터 구조 변경**

- **목표:** AI가 각 훈련 단계마다 개별 소요 시간을 제공하도록 요청한다.
- **작업 파일:** `src/components/AiTrainingRecommender.tsx`, `src/lib/trainingData.ts` (및 관련 타입 정의 파일)
- **변경 사항:**
    1.  **프롬프트 수정:** AI에게 `steps` 배열의 각 객체에 `duration_seconds` (해당 단계를 위한 권장 시간(초)) 필드를 포함하여 반환하도록 요청한다.
    2.  **타입 정의 수정:** `TrainingStep` 및 관련 인터페이스에 `duration_seconds: number;` 속성을 추가한다.

---

### **2단계: `TrainingSteps.tsx` 로직 전면 리팩토링 (단계별 타이머 구현)**

- **목표:** 단일 전체 타이머 구조에서, 각 훈련 단계에 종속된 개별 타이머 구조로 변경한다.
- **작업 파일:** `src/components/training-progress/TrainingSteps.tsx`, `src/components/training-progress/TrainingTimer.tsx`
- **변경 사항:**
    1.  **타이머 로직 이전:** `TrainingSteps.tsx`가 타이머의 상태(남은 시간, 리셋 등)를 모두 관리하도록 로직을 집중시킨다. `TrainingTimer.tsx`는 순수하게 시간을 시각적으로 표시하는 역할만 담당하도록 수정할 수 있다.
    2.  **단계 변경 시 타이머 리셋:** 사용자가 캐러셀을 통해 다음 훈련 단계로 이동할 때마다, `useEffect` 또는 `onSelect` 콜백을 사용하여 현재 단계의 `duration_seconds` 값으로 타이머를 리셋하고 새로 시작한다.
    3.  **단계별 시간 초과 처리:**
        - 각 단계의 타이머가 0이 되어도 훈련이 실패 처리되지 않는다.
        - 시간이 초과되면 시각적 알림(예: 타이머 색상 변경)을 주고, 사용자가 다음 단계로 넘어갈 수 있도록 유도한다. (예: "다음" 버튼 자동 활성화)
    4.  **전체 소요 시간 측정:** 단계별 타이머와 별개로, 컴포넌트가 마운트된 시점부터 '훈련 완료' 버튼을 누를 때까지의 **전체 실제 소요 시간**은 계속해서 측정한다.

---

### **3단계: 데이터 저장 로직 유지 및 확인**

- **목표:** 사용자 경험은 크게 바뀌지만, 최종적으로 데이터베이스에 저장되는 정보의 구조는 변경되지 않음을 확인한다.
- **작업 파일:** `src/components/TrainingProgressPage.tsx`
- **변경 사항 (없음):**
    1.  `TrainingSteps`는 리팩토링 후에도 최종적으로 **'전체 실제 소요 시간'** 만을 `onFinish` 콜백을 통해 상위 컴포넌트로 전달한다.
    2.  `TrainingProgressPage`는 이 값을 받아 기존과 동일하게 `duration_minutes`로 변환하여 `useTrainingHistory` 훅으로 전달한다.
    3.  **결론적으로, 데이터베이스 스키마나 히스토리 저장 로직은 수정할 필요가 없다.**

---
