# 프로젝트 개요: AI 강아지 자세 분석 시스템

## 1. 핵심 목표

YOLOv8 모델을 활용하여 사용자가 업로드한 동영상 속 강아지의 관절 움직임을 분석하고, '자세 안정성 점수'와 함께 시각적인 스켈레톤 영상을 제공합니다. 이를 통해 반려인이 강아지의 걸음걸이 변화를 객관적인 데이터로 추적하여, 잠재적인 건강 문제를 조기에 인지하고 지속적으로 관리할 수 있도록 돕는 것을 목표로 합니다.

---

## 2. 아키텍처 요약

-   **계산과 데이터의 완전한 분리** 원칙을 따릅니다.
-   **백엔드 (FastAPI @ Hugging Face):** 순수한 '계산 자원'으로만 기능합니다. YOLOv8 모델로 영상에서 관절 좌표 데이터를 추출하는 역할만 담당합니다.
-   **데이터 저장소 (Supabase):** 백엔드에서 계산된 결과(좌표, 점수 등)는 **Supabase DB**에, 원본 영상 파일은 **Supabase Storage**에 영구적으로 저장됩니다. 이를 통해 데이터의 영속성을 확보했습니다.
-   **프론트엔드 (React/Vite):** Supabase에 저장된 데이터를 가져와 사용자에게 보여줍니다. 특히, 원본 영상 위에 Canvas API를 사용해 스켈레톤을 실시간으로 렌더링하는 핵심적인 시각화 역할을 담당합니다.

---

## 3. 주요 기능 및 최근 개선사항

### 3.1. 핵심 기능
-   **동영상 업로드 및 비동기 분석:** 사용자가 영상을 업로드하면 백그라운드에서 분석이 진행되며, 프론트엔드는 진행률을 폴링하여 보여줍니다.
-   **결과 시각화:** 분석 완료 시, 원본 영상 위에 실시간으로 스켈레톤을 렌더링하여 보여줍니다.
-   **기록 관리 및 조회:** 강아지별로 과거 분석 기록을 모두 조회하고, 상세 결과를 모달로 확인할 수 있습니다.

### 3.2. 사용자 경험(UX) 개선 (2025-07-30)

-   **문제점 1:** 사용자가 기능을 처음 접했을 때, 어떤 결과가 나오는지 예측하기 어렵고 어떤 영상을 올려야 할지 알기 어려웠습니다.
-   **해결책 1:**
    -   시스템 아키텍처상(프론트엔드 렌더링) 스켈레톤이 입혀진 영상 파일이 존재하지 않는 기술적 제약을 고려하여, **실제 작동 모습을 화면 녹화한 `posture-analysis-demo.gif` 파일을 제작**했습니다.
    -   이 GIF를 `PostureAnalysisPage.tsx`에 'AI 분석 미리보기' 형태로 삽입하여, 사용자가 기능을 사용하기 전에 결과물을 직관적으로 ��해하고 최적의 영상(옆모습)을 업로드하도록 유도했습니다.

-   **문제점 2:** AI가 분석한 점수와 피드백이 자칫 '의료적 진단'으로 오인될 소지가 있었습니다. (예: 아픈 강아지가 정지 상태 영상에서 높은 점수를 받는 경우, '문제없음'으로 오해할 위험)
-   **해결책 2:**
    -   **피드백 정책을 전면 수정**하여 서비스의 신뢰도와 안정성을 높였습니다.
    -   '정상', '완벽' 등 확정적인 문구를 모두 제거하고, **"분석된 영상 내에서의 안정성"**만을 의미하는 보조 지표임을 명확히 했습니다.
    -   모든 점수 구간의 피드백에 **"정확한 진단은 반드시 수의사와 상담해야 한다"**는 점을 명시하여 사용자의 오해를 방지하고 서비스의 책임 범위를 명확히 했습니다.

---

## 4. 식별된 한계점 및 향후 전략

-   **현재 한계점:** "가만히 서 있거나 움직임이 거의 없는 영상"이 업로드될 경우, 실제로는 보행 안정성을 분석할 수 없음에도 불구하고 매우 높은 점수가 나올 수 있는 논리적 허점이 존재합니다.
-   **장기 전략:** 백엔드(`main.py`)에 **'움직임 없음' 탐지 로직**을 추가하는 것을 고려합니다. 영상 프레임 간의 관절 좌표 변화량을 계산��여, 변화가 임계값 이하일 경우 점수 계산 대신 "움직임이 부족하여 분석할 수 없습니다"라는 피드백을 반환하도록 시스템을 고도화할 계획입니다.